---
name: Project Setup and Database Schema
status: open
created: 2025-09-28T15:28:01Z
updated: 2025-09-28T16:18:18Z
github: https://github.com/bluejazz822/compliance-keyword-scanner/issues/2
depends_on: []
parallel: true
conflicts_with: []
---

# Task 001: Project Setup and Database Schema

## Description

Set up the foundational Node.js project structure with PostgreSQL database schema and environment configuration for the compliance keyword scanner system. This includes establishing the core database models for scans, pages, matches, and reports, along with Sequelize ORM configuration and Redis setup for queue management.

## Acceptance Criteria

- [ ] Node.js project initialized with proper package.json and dependencies
- [ ] PostgreSQL database schema created with all required tables
- [ ] Sequelize ORM configured with models and migrations
- [ ] Redis connection established for queue management
- [ ] Environment configuration files (.env.example, .env.template) created
- [ ] Database migrations run successfully
- [ ] All database models have proper indexes and relationships
- [ ] Unit tests written for all database models
- [ ] Documentation created for setup and configuration

## Technical Details

### Database Schema Requirements

**Scans Table**:
- id (primary key)
- domain (string, required)
- status (enum: pending, running, completed, failed)
- created_at, updated_at, started_at, completed_at
- total_pages, scanned_pages, matched_pages
- error_message (text, nullable)
- configuration (jsonb for keyword patterns)

**Pages Table**:
- id (primary key)
- scan_id (foreign key to scans)
- url (string, unique per scan)
- title (string)
- content_hash (string for duplicate detection)
- crawled_at
- status (enum: pending, crawled, error)
- error_message (text, nullable)

**Matches Table**:
- id (primary key)
- page_id (foreign key to pages)
- keyword (string)
- match_type (enum: exact, partial, regex)
- context_before, context_after (text)
- position_start, position_end (integer)
- created_at

**Reports Table**:
- id (primary key)
- scan_id (foreign key to scans)
- filename (string)
- format (enum: pdf, json, csv)
- generated_at
- file_path (string)

### Dependencies Setup

- Express.js for API server
- Sequelize for PostgreSQL ORM
- Redis and Bull.js for queue management
- Playwright for web crawling
- Puppeteer for PDF generation
- Winston for logging
- Joi for validation
- Jest for testing

### Environment Configuration

- Database connection strings
- Redis connection settings
- Application port and host
- Logging levels
- Rate limiting configurations

## Dependencies

- None (foundation task)

## Effort Estimate

Medium (16-24 hours)

- Project setup and dependencies: 4-6 hours
- Database schema design: 6-8 hours
- Sequelize models and migrations: 4-6 hours
- Redis configuration: 2-4 hours

## Definition of Done

- [ ] All database tables created with proper schema
- [ ] Sequelize models defined with validations and associations
- [ ] Database migrations run without errors
- [ ] Redis connection established and tested
- [ ] Environment configuration documented
- [ ] Unit tests pass for all models
- [ ] Development server starts successfully
- [ ] Database indexes created for performance
- [ ] Foreign key constraints properly defined
